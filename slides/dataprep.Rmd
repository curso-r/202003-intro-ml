---
title: "Introdução ao Machine Learning com R"
subtitle: "Dataprep e Workflows"
author: "<img src = 'https://d33wubrfki0l68.cloudfront.net/9b0699f18268059bdd2e5c21538a29eade7cbd2b/67e5c/img/logo/cursor1-5.png' width = '40%'>"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["default", "default-fonts", "custom.css", "curso-r-bg.css"]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
---

```{r setup, include=FALSE}
library(ggplot2)
library(magrittr)
library(knitr)
library(kableExtra)
library(tidyverse)
library(plot3D)
library(ISLR)
theme_set(theme_minimal(14))
options(htmltools.dir.version = FALSE)
```


# Conteúdo

- sobre o que é recipes (recipe -> prep -> bake/juice)
- Principais problemas na variável resposta
  - desbalanceamento
  - assimetria
  - escala
- Principais problemas nas features
    - features categóricas
        - encoding (one-hot, dummy, etc)
        - transformar em número se ordinal
    - multicolinearidade
    - vars constantes
    - alta cardinalidade (muitas categorias)
    - categorias pouco frequentes (step_other)
    - escala
    - assimetria
    - valores faltantes
    - valores novos
- workflow
- var importance
- Seleção de variáveis
- Criação de atributos (feature engineering)
- data leakage

---

# Recipes

---

# Normalização

.pull-left[
**o que é: ** é a transformação da variável para ter média próxima de zero e dispersão próxima de 1.

**por que fazer**: 

1) para penalização LASSO funcionar; 

2) para evitar problemas numéricos;

]

.pull-right[

**step**: `step_center()`, `step_scale()`

]


---

# Simetrização

.pull-left[
**o que é: ** é a transformação da variável para ter forma aproximadamente simétrica.

**por que fazer**: 

1) para a estabilidade dos modelos lineares; 

2) menos peso para valores aberrantes (pontos de alavanca);

3) variável resposta precisa ser simétrica para a loss `rmse` não priorizar valores aberrantes.

]

.pull-right[

**step**: `step_YeoJohnson()`, `step_BoxCox()`, `step_log()`

]

---

# Categorias novas

.pull-left[
**o que é: ** são categorias que não estavam presente na hora do ajuste do modelo.

**por que fazer**: 

1) para o modelo não se negar a criar predições; 


]

.pull-right[

**step**: `step_novel()`

]

---

# Categorias raras

.pull-left[

**o que é: ** são categorias com baixa frequência na hora do ajuste do modelo.

**por que fazer**: 

1) para evitar criar colunas com pouca informação (overfitting);

2) para não haver problemas no momento da validação cruzada;

]

.pull-right[

**step**: `step_other()`, `step_nzv()`, `step_zv()`

]



